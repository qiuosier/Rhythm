{
    "steps": [
        {
            "name": "gcr.io/cloud-builders/git",
            "args": ["submodule", "update", "--init", "--recursive"]
        },
        {
            "name": "gcr.io/cloud-builders/git",
            "args": ["clone", "--depth", "1", "https://github.com/qiuosier/Pisces.git"]
        },
        {
            "name": "gcr.io/cloud-builders/gsutil",
            "args": ["cp", "gs://qiu-nest.appspot.com/private.py", "rhythm/private.py"],
            "timeout": "600s"
        },
        {
            "name": "python:3.7",
            "args": ["pip", "install", "-t", "./lib", "-r", "requirements.txt"],
            "timeout": "600s"
        },
        {
            "name": "python:3.7",
            "args": ["PYTHONPATH=./lib", "python", "manage.py", "collectstatic", "--noinput"],
            "timeout": "600s"
        },
        {
            "name": "gcr.io/cloud-builders/gcloud",
            "args": ["app", "deploy"],
            "timeout": "600s"
        }
    ]
}